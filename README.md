# AdGuard DNS filter without privacy filters (Ads only)
A DNS filter that removed tracking and privacy rules from AdGuard DNS filter.  
This filter blocks only ad domains.

### AdGuard DNSフィルタ（プライバシー抜き）
AdGuard DNSフィルタからトラッキングやプライバシー用のフィルタを取り除いたDNSフィルタです。追跡、解析等のブロックが不要な方向け。

## AdGuardで購読する
購読するには、AdGuardのDNSフィルタの設定で「＋DNSフィルタを追加」をタップし、下記のURLを指定します。  
https://raw.githubusercontent.com/kitadai31/AdGuardSDNSFilter_withoutPrivacyFilters/master/Filters/filter.txt

## 目的
本家のAdGuard DNSフィルタは、広告ブロック用のフィルタだけでなくプライバシー用のフィルタも一緒になっているため、「プライバシー用のフィルタは要らない」と思っていても、広告ブロック用のDNSフィルタだけを個別に購読することができません。

一方で、この「**AdGuard DNSフィルタ（プライバシー抜き）**」は本家のDNSフィルタからプライバシー専用のフィルタを抜いているので、AdGuardのDNSフィルタリングで広告のみをブロックできます。

そのため、Wikiや本スレで初心者向けに推奨されている、コンテンツブロックのフィルタ設定でプライバシーなどを切って「AdGuardベースフィルタ・AdGuardモバイル広告フィルタ・AdGuard日本語フィルタ」の三点セットで使う設定とも親和性が高いです。  
<sub>注意: これはあくまでもフィルタ生成の段階でプライバシー用のフィルタを合成の対象から外しただけなので、残ったフィルタにプライバシー目的のルールが一部含まれていることは起こり得ます。</sub>

### ・対象者
・プライバシーフィルタが一緒になっているのは精神衛生上よくない  
・私は追跡やアクセス解析を許容する  
・なるべく広告だけをブロックしたい  
・広告じゃないのに余計なブロックが発生するのが嫌だ  
・ブロックを減らしたい

といったこだわりのある方向けです。  
あくまでも、カスタマイズに慣れたユーザー向けということにしておきます  

### ・誤爆防止
また、副次的な効果として誤爆が減ることもあるようです。  
具体例としては、`google-analytics.com`をブロックすると起動しないアプリ(実在するそうです)を使いたい場合、公式DNSフィルタではブロックされてしまうため起動しませんが、プライバシー抜きならブロックされないので起動できます。これは、プライバシーフィルタの中に`||google-analytics.com^`というルールがあるためです。google-analytics.comは広告ではないので、アクセス解析のブロックが不要な人にとっては必要のないルールです。

追跡や解析ブロックが不要な人にとっては、プライバシー関連の不要なルールがないことで公式と比べると無駄な誤爆を減らすことができます。  
(google-analytics.comをブロックしたくないだけならDNSのユーザーフィルタに`@@||google-analytics.com^`を追加してもいいですが、不要なルールが最初からなければ誤爆のリスクが減ります。)

## 仕組み
このフィルタはスクリプトで自動で生成しています。

そもそも公式のAdGuard DNSフィルタ自体が、各種フィルタをスクリプトで機械的に合成してDNS用に調整したりして、自動で生成されているフィルタです。  
(これは[公式GitHub](https://github.com/AdguardTeam/AdGuardSDNSFilter)で公開されています。)

この公式GitHubをフォークし、その中にある構成ファイルを編集して生成時にプライバシーフィルタを含めないようにしたものがこのプライバシー抜きDNSフィルタです。

このことから、フィルタ生成の仕組みやスクリプトは公式と全く同じであるといえます。

公式DNSフィルタから外しているフィルタは、  
・AdGuard追跡防止フィルタ  
・EasyPrivacy  
・AdGuardベースフィルタのうちの暗号通貨マイニングフィルタ  
の3つです。

また、フィルタはGitHub Actionsにより自動で毎日4:24にビルド(更新)されます。

### ・ブロック漏れについて
ビルド時に除外している「AdGuard追跡防止フィルタ」「EasyPrivacy」は完全にプライバシー専用のフィルタとして設計されています。ですので「公式のDNSフィルタでは発生しない広告のブロック漏れが『プライバシー抜き』の方では発生してしまう」ということは起こらない　はず　です。  
しかし、何らかの間違いによって公式では発生しないブロック漏れが起こるかもしれません。「プライバシー抜き」は、あくまでもAdGuardDNSフィルタという一つの完成されたフィルタの一部を改変しているフィルタであるということに留意して使用してください。

(2022/02/21追記)結局1つブロック漏れを見つけました  
ネイティブ広告プラットフォームの「Outbrain」と「LOGLY」をブロックするルールがプライバシーの方に入っているため、プライバシー抜きを使っているとこれらがブロックされないようです  
ネイティブ広告とは、一見すると普通のおすすめ記事一覧(レコメンドウィジェット)なのに中に広告が仕込まれているタイプの広告であり、全体をブロックするとおすすめ記事一覧が消えてしまうので、DNSには入れずに通常のフィルタで対処しているのだと思います。  
DNSでブロックされないため、ニュースアプリのアプリ内ブラウザからニュースサイトを開いたなどのパターンなどで広告が出てしまいます。  
気になる方はDNSユーザールールに`||outbrain.com^` `||logly.co.jp^`を入れればおすすめ記事一覧もろとも消せるのでおすすめです。
